<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê°€í˜„ì´ ê´€ë¦¬ì í˜ì´ì§€ - Windows 98</title>
  <style>
    @font-face {
        font-family: 'YoonChildfundkoreaManSeh';
        src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2408@1.0/YoonChildfundkoreaManSeh.woff2') format('woff2');
        font-weight: normal;
        font-style: normal;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'YoonChildfundkoreaManSeh', 'MS Sans Serif', sans-serif;
      background: linear-gradient(45deg, #008080, #0080A0);
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
    }

    .desktop-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4" viewBox="0 0 4 4"><rect width="1" height="1" fill="%23ffffff22"/></svg>') repeat,
        linear-gradient(45deg, #008080, #0080A0);
      z-index: -1;
    }

    .admin-window {
      max-width: 1000px;
      margin: 0 auto;
      background: #c0c0c0;
      border: 2px outset #c0c0c0;
      box-shadow: 6px 6px 12px rgba(0,0,0,0.4);
      animation: adminAppear 1.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes adminAppear {
      0% {
        opacity: 0;
        transform: scale(0.3) rotateY(90deg);
      }
      70% {
        transform: scale(1.05) rotateY(-5deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotateY(0deg);
      }
    }

    .title-bar {
      background: linear-gradient(to right, #9b59b6, #8e44ad);
      color: white;
      height: 28px;
      display: flex;
      align-items: center;
      padding: 0 12px;
      font-weight: bold;
      position: relative;
      overflow: hidden;
    }

    .title-bar::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: titleShine 4s infinite;
    }

    @keyframes titleShine {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .title-text {
      flex: 1;
      font-size: 12px;
    }

    .window-controls {
      display: flex;
      gap: 4px;
    }

    .control-button {
      width: 18px;
      height: 16px;
      background: linear-gradient(to bottom, #c0c0c0, #a0a0a0);
      border: 1px outset #c0c0c0;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
      font-weight: bold;
      transition: all 0.1s;
    }

    .control-button:hover {
      background: linear-gradient(to bottom, #d0d0d0, #b0b0b0);
      transform: scale(1.1);
    }

    .control-button:active {
      border: 1px inset #c0c0c0;
    }

    .admin-header {
      padding: 16px;
      background: linear-gradient(to bottom, #ffffff, #f0f0f0);
      border-bottom: 2px inset #c0c0c0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: headerGlow 3s ease-in-out infinite;
    }

    @keyframes headerGlow {
      0%, 100% { 
        box-shadow: inset 0 0 10px rgba(155,89,182,0.2);
      }
      50% { 
        box-shadow: inset 0 0 20px rgba(155,89,182,0.5);
      }
    }

    .admin-header h1 {
      color: #9b59b6;
      font-size: 18px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      position: relative;
    }

    .admin-header h1::before {
      content: "âš™ï¸";
      margin-right: 8px;
      animation: gearSpin 4s linear infinite;
    }

    @keyframes gearSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .logout-btn {
      padding: 8px 16px;
      background: linear-gradient(to bottom, #e74c3c, #c0392b);
      border: 2px outset #c0c0c0;
      color: white;
      font-weight: bold;
      cursor: pointer;
      font-size: 11px;
      transition: all 0.2s;
      animation: logoutPulse 3s ease-in-out infinite;
    }

    @keyframes logoutPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .logout-btn:hover {
      background: linear-gradient(to bottom, #ec7063, #e74c3c);
      transform: translateY(-1px);
    }

    .logout-btn:active {
      border: 2px inset #c0c0c0;
      transform: translateY(1px);
    }

    .admin-tabs {
      background: linear-gradient(to bottom, #e0e0e0, #c0c0c0);
      border-bottom: 2px inset #c0c0c0;
      padding: 8px;
      display: flex;
      gap: 4px;
      flex-wrap: wrap;
      overflow-x: auto;
    }

    .tab-btn {
      padding: 8px 16px;
      background: linear-gradient(to bottom, #f0f0f0, #d0d0d0);
      border: 2px outset #c0c0c0;
      cursor: pointer;
      font-size: 11px;
      transition: all 0.2s;
      position: relative;
      white-space: nowrap;
    }

    .tab-btn:hover {
      background: linear-gradient(to bottom, #ffffff, #e0e0e0);
      transform: translateY(-1px);
    }

    .tab-btn.active {
      background: linear-gradient(to bottom, #9b59b6, #8e44ad);
      color: white;
      border: 2px inset #c0c0c0;
      transform: translateY(1px);
      box-shadow: inset 0 0 8px rgba(0,0,0,0.3);
    }

    .tab-btn.active::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
      animation: tabShine 2s infinite;
    }

    @keyframes tabShine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .admin-body {
      padding: 16px;
      background: #c0c0c0;
      min-height: 500px;
    }

    .tab-content {
      display: none;
      animation: contentFadeIn 0.5s ease-out;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes contentFadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .content-panel {
      background: linear-gradient(to bottom, #ffffff, #f8f8f8);
      border: 2px inset #c0c0c0;
      padding: 16px;
      border-radius: 4px;
      margin-bottom: 16px;
    }

    .panel-header {
      font-weight: bold;
      color: #9b59b6;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px dotted #9b59b6;
      position: relative;
    }

    .panel-header::before {
      content: "ğŸ“";
      margin-right: 6px;
      animation: headerIcon 3s ease-in-out infinite;
    }

    @keyframes headerIcon {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    .form-group {
      margin-bottom: 12px;
    }

    .form-label {
      display: block;
      margin-bottom: 4px;
      font-weight: bold;
      color: #333;
      font-size: 11px;
    }

    .form-input, .form-textarea {
      width: 100%;
      padding: 6px 8px;
      border: 2px inset #c0c0c0;
      background: white;
      font-family: inherit;
      font-size: 11px;
      transition: all 0.2s;
    }

    .form-input:focus, .form-textarea:focus {
      outline: none;
      border: 2px inset #9b59b6;
      background: #f8f0ff;
      box-shadow: 0 0 5px rgba(155,89,182,0.3);
    }

    .form-textarea {
      height: 80px;
      resize: vertical;
    }

    .submit-btn {
      padding: 8px 16px;
      background: linear-gradient(to bottom, #27ae60, #2ecc71);
      border: 2px outset #c0c0c0;
      color: white;
      font-weight: bold;
      cursor: pointer;
      font-size: 11px;
      transition: all 0.2s;
      margin-right: 8px;
    }

    .submit-btn:hover {
      background: linear-gradient(to bottom, #2ecc71, #58d68d);
      transform: translateY(-1px);
    }

    .submit-btn:active {
      border: 2px inset #c0c0c0;
      transform: translateY(1px);
    }

    .submit-btn:disabled {
      background: linear-gradient(to bottom, #bdc3c7, #95a5a6);
      cursor: not-allowed;
      opacity: 0.6;
    }

    .delete-btn {
      padding: 4px 8px;
      background: linear-gradient(to bottom, #e74c3c, #c0392b);
      border: 2px outset #c0c0c0;
      color: white;
      font-weight: bold;
      cursor: pointer;
      font-size: 9px;
      transition: all 0.1s;
      margin-left: 4px;
    }

    .delete-btn:hover {
      background: linear-gradient(to bottom, #ec7063, #e74c3c);
    }

    .delete-btn:active {
      border: 2px inset #c0c0c0;
    }

    .content-list {
      max-height: 400px;
      overflow-y: auto;
      border: 2px inset #c0c0c0;
      background: white;
      padding: 8px;
    }

    .content-item {
      background: linear-gradient(to bottom, #f8f8f8, #f0f0f0);
      border: 1px solid #ddd;
      padding: 12px;
      margin-bottom: 8px;
      border-radius: 4px;
      transition: all 0.2s;
      animation: itemSlideIn 0.3s ease-out;
    }

    @keyframes itemSlideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .content-item:hover {
      background: linear-gradient(to bottom, #fff, #f8f8f8);
      transform: translateX(5px);
      box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
    }

    .content-item h3 {
      color: #9b59b6;
      margin-bottom: 8px;
      font-size: 12px;
    }

    .content-item p {
      color: #333;
      font-size: 10px;
      line-height: 1.4;
      margin-bottom: 8px;
    }

    .item-actions {
      display: flex;
      gap: 4px;
    }

    .gallery-preview {
      width: 100px;
      height: 80px;
      object-fit: cover;
      border: 1px solid #999;
      border-radius: 4px;
      margin-bottom: 8px;
    }

    .status-bar {
      background: linear-gradient(to bottom, #34495e, #2c3e50);
      color: white;
      padding: 8px 16px;
      font-size: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .status-info {
      display: flex;
      gap: 16px;
    }

    .status-time {
      animation: statusBlink 2s ease-in-out infinite;
    }

    @keyframes statusBlink {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }

    .success-message {
      background: linear-gradient(to bottom, #d4edda, #c3e6cb);
      border: 2px inset #28a745;
      color: #155724;
      padding: 8px 12px;
      margin: 8px 0;
      border-radius: 4px;
      text-align: center;
      animation: successSlide 0.5s ease-out;
      display: none;
    }

    @keyframes successSlide {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .loading-indicator {
      text-align: center;
      padding: 20px;
      color: #666;
      font-style: italic;
    }

    .loading-spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #ccc;
      border-top: 2px solid #9b59b6;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 6px;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    ::-webkit-scrollbar {
      width: 16px;
    }

    ::-webkit-scrollbar-track {
      background: #c0c0c0;
      border: 1px inset #c0c0c0;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, #dfdfdf, #a0a0a0);
      border: 1px outset #c0c0c0;
    }

    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      .admin-window {
        margin: 0;
      }

      .admin-body {
        padding: 12px;
      }

      .admin-tabs {
        flex-direction: column;
      }

      .tab-btn {
        width: 100%;
        text-align: center;
      }

      .admin-header {
        flex-direction: column;
        gap: 8px;
        text-align: center;
      }

      .content-list {
        max-height: 300px;
      }
    }
  </style>
</head>
<body>
  <div class="desktop-bg"></div>
  
  <div class="admin-window">
    <div class="title-bar">
      <div class="title-text">ğŸ› ï¸ Admin Control Panel - System Manager v3.0</div>
      <div class="window-controls">
        <div class="control-button">-</div>
        <div class="control-button">â–¡</div>
        <div class="control-button" onclick="window.close()">Ã—</div>
      </div>
    </div>

    <div class="admin-header">
      <h1>ê°€í˜„ì´ ê´€ë¦¬ì í˜ì´ì§€</h1>
      <button id="logoutBtn" class="logout-btn">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
    </div>

    <div class="admin-tabs">
      <button class="tab-btn active" data-tab="blog">ğŸ“‚ ë¸”ë¡œê·¸</button>
      <button class="tab-btn" data-tab="gallery">ğŸ–¼ï¸ ê°¤ëŸ¬ë¦¬</button>
      <button class="tab-btn" data-tab="timeline">â° íƒ€ì„ë¼ì¸</button>
      <button class="tab-btn" data-tab="youtube">ğŸ“º ìœ íŠœë¸Œ</button>
      <button class="tab-btn" data-tab="diary">ğŸ“– ë‹¤ì´ì–´ë¦¬</button>
      <button class="tab-btn" data-tab="guestbook">ğŸ’¬ ë°©ëª…ë¡</button>
    </div>

    <div class="admin-body">
      <div class="tab-content active" id="blog">
        <div class="content-panel">
          <div class="panel-header">ìƒˆ ë¸”ë¡œê·¸ ê¸€ ì‘ì„±</div>
          <div class="form-group">
            <label class="form-label" for="blog-title">ì œëª©</label>
            <input type="text" id="blog-title" class="form-input" placeholder="ê¸€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          <div class="form-group">
            <label class="form-label" for="blog-content">ë‚´ìš©</label>
            <textarea id="blog-content" class="form-textarea" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
          </div>
          <button id="blog-submit" class="submit-btn">ğŸ“ ê¸€ ë“±ë¡</button>
          <div id="blog-success" class="success-message">âœ… ë¸”ë¡œê·¸ ê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
        </div>
        
        <div class="content-panel">
          <div class="panel-header">ë¸”ë¡œê·¸ ê¸€ ëª©ë¡</div>
          <div id="blog-list" class="content-list">
            <div class="loading-indicator">
              <div class="loading-spinner"></div>
              ë¸”ë¡œê·¸ ê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="gallery">
        <div class="content-panel">
          <div class="panel-header">ìƒˆ ì´ë¯¸ì§€ ì—…ë¡œë“œ</div>
          <div class="form-group">
            <label class="form-label" for="gallery-file">ì´ë¯¸ì§€ íŒŒì¼</label>
            <input type="file" id="gallery-file" class="form-input" accept="image/*">
          </div>
          <div class="form-group">
            <label class="form-label" for="gallery-desc">ì„¤ëª…</label>
            <input type="text" id="gallery-desc" class="form-input" placeholder="ì´ë¯¸ì§€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          <button id="gallery-submit" class="submit-btn">ğŸ“· ì—…ë¡œë“œ</button>
          <div id="gallery-success" class="success-message">âœ… ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!</div>
        </div>
        
        <div class="content-panel">
          <div class="panel-header">ê°¤ëŸ¬ë¦¬ ëª©ë¡</div>
          <div id="gallery-list" class="content-list">
            <div class="loading-indicator">
              <div class="loading-spinner"></div>
              ê°¤ëŸ¬ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="timeline">
        <div class="content-panel">
          <div class="panel-header">ìƒˆ íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸</div>
          <div class="form-group">
            <label class="form-label" for="timeline-title">ì´ë²¤íŠ¸ ì œëª©</label>
            <input type="text" id="timeline-title" class="form-input" placeholder="ì´ë²¤íŠ¸ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          <div class="form-group">
            <label class="form-label" for="timeline-content">ë‚´ìš©</label>
            <textarea id="timeline-content" class="form-textarea" placeholder="ì´ë²¤íŠ¸ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
          </div>
          <button id="timeline-submit" class="submit-btn">â° ì´ë²¤íŠ¸ ë“±ë¡</button>
          <div id="timeline-success" class="success-message">âœ… íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
        </div>
        
        <div class="content-panel">
          <div class="panel-header">íƒ€ì„ë¼ì¸ ëª©ë¡</div>
          <div id="timeline-list" class="content-list">
            <div class="loading-indicator">
              <div class="loading-spinner"></div>
              íƒ€ì„ë¼ì¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="youtube">
        <div class="content-panel">
          <div class="panel-header">ìƒˆ ìœ íŠœë¸Œ ì˜ìƒ</div>
          <div class="form-group">
            <label class="form-label" for="youtube-url">ìœ íŠœë¸Œ ë§í¬</label>
            <input type="text" id="youtube-url" class="form-input" placeholder="https://www.youtube.com/watch?v=...">
          </div>
          <div class="form-group">
            <label class="form-label" for="youtube-desc">ì„¤ëª…</label>
            <input type="text" id="youtube-desc" class="form-input" placeholder="ì˜ìƒ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          <button id="youtube-submit" class="submit-btn">ğŸ“º ì˜ìƒ ë“±ë¡</button>
          <div id="youtube-success" class="success-message">âœ… ìœ íŠœë¸Œ ì˜ìƒì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
        </div>
        
        <div class="content-panel">
          <div class="panel-header">ìœ íŠœë¸Œ ì˜ìƒ ëª©ë¡</div>
          <div id="youtube-list" class="content-list">
            <div class="loading-indicator">
              <div class="loading-spinner"></div>
              ìœ íŠœë¸Œ ì˜ìƒì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="diary">
        <div class="content-panel">
          <div class="panel-header">ìƒˆ ë‹¤ì´ì–´ë¦¬ í•­ëª©</div>
          <div class="form-group">
            <label class="form-label" for="diary-date">ë‚ ì§œ</label>
            <input type="date" id="diary-date" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label" for="diary-content">ì˜¤ëŠ˜ì˜ ì¼ê¸°</label>
            <textarea id="diary-content" class="form-textarea" placeholder="ì˜¤ëŠ˜ì˜ ì¼ê¸°ë¥¼ ì‘ì„±í•˜ì„¸ìš”"></textarea>
          </div>
          <button id="diary-submit" class="submit-btn">ğŸ“– ì¼ê¸° ë“±ë¡</button>
          <div id="diary-success" class="success-message">âœ… ë‹¤ì´ì–´ë¦¬ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
        </div>
        
        <div class="content-panel">
          <div class="panel-header">ë‹¤ì´ì–´ë¦¬ ëª©ë¡</div>
          <div id="diary-list" class="content-list">
            <div class="loading-indicator">
              <div class="loading-spinner"></div>
              ë‹¤ì´ì–´ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="guestbook">
        <div class="content-panel">
          <div class="panel-header">ë°©ëª…ë¡ ê´€ë¦¬</div>
          <p>ë°©ëª…ë¡ì€ ì‚¬ìš©ìë“¤ì´ ì§ì ‘ ì‘ì„±í•˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ì¡°íšŒë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
        </div>
        
        <div class="content-panel">
          <div class="panel-header">ë°©ëª…ë¡ ëª©ë¡</div>
          <div id="guestbook-list" class="content-list">
            <div class="loading-indicator">
              <div class="loading-spinner"></div>
              ë°©ëª…ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="status-bar">
      <div class="status-info">
        <span>ğŸŸ¢ ì‹œìŠ¤í…œ ìƒíƒœ: ì •ìƒ</span>
        <span>ğŸ‘¤ ê´€ë¦¬ì ëª¨ë“œ</span>
        <span>ğŸ”’ ë³´ì•ˆ: í™œì„±í™”</span>
      </div>
      <div class="status-time" id="statusTime">00:00:00</div>
    </div>
  </div>

  <script type="module">
    import { db, storage } from './firebase/firebase.js';
    import {
      collection,
      addDoc,
      serverTimestamp,
      getDocs,
      query,
      orderBy,
      deleteDoc,
      doc
    } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";
    import {
      ref,
      uploadBytes,
      getDownloadURL
    } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-storage.js";

    if (!sessionStorage.getItem('admin')) {
      alert('ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤ ğŸš«');
      window.location.href = 'login.html';
    }

    let currentTab = 'blog';

    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');

    tabBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        tabBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        const targetId = btn.dataset.tab;
        currentTab = targetId;
        
        tabContents.forEach(tc => {
          tc.classList.remove('active');
          if (tc.id === targetId) tc.classList.add('active');
        });
        
        loadContent(targetId);
      });
    });

    document.getElementById('logoutBtn').addEventListener('click', () => {
      if (confirm('ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ğŸ¤”')) {
        sessionStorage.removeItem('admin');
        window.location.href = 'login.html';
      }
    });

    function updateTime() {
      const now = new Date();
      const timeString = now.toLocaleTimeString('ko-KR');
      document.getElementById('statusTime').textContent = timeString;
    }

    setInterval(updateTime, 1000);
    updateTime();

    function showSuccess(elementId) {
      const element = document.getElementById(elementId);
      element.style.display = 'block';
      setTimeout(() => {
        element.style.display = 'none';
      }, 3000);
    }

    function setButtonState(buttonId, loading) {
      const button = document.getElementById(buttonId);
      if (loading) {
        button.disabled = true;
        button.textContent = 'ì²˜ë¦¬ ì¤‘...';
      } else {
        button.disabled = false;

        switch(buttonId) {
          case 'blog-submit': button.textContent = 'ğŸ“ ê¸€ ë“±ë¡'; break;
          case 'gallery-submit': button.textContent = 'ğŸ“· ì—…ë¡œë“œ'; break;
          case 'timeline-submit': button.textContent = 'â° ì´ë²¤íŠ¸ ë“±ë¡'; break;
          case 'youtube-submit': button.textContent = 'ğŸ“º ì˜ìƒ ë“±ë¡'; break;
          case 'diary-submit': button.textContent = 'ğŸ“– ì¼ê¸° ë“±ë¡'; break;
        }
      }
    }

    document.getElementById('blog-submit').addEventListener('click', async () => {
      const title = document.getElementById('blog-title').value.trim();
      const content = document.getElementById('blog-content').value.trim();
      
      if (!title || !content) {
        alert('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ“');
        return;
      }

      try {
        setButtonState('blog-submit', true);
        
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        await addDoc(collection(db, 'blog'), {
          title,
          content,
          createdAt: serverTimestamp()
        });
        
        showSuccess('blog-success');
        document.getElementById('blog-title').value = '';
        document.getElementById('blog-content').value = '';
        loadBlogList();
        
      } catch (error) {
        console.error('ë¸”ë¡œê·¸ ë“±ë¡ ì˜¤ë¥˜:', error);
        alert('ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      } finally {
        setButtonState('blog-submit', false);
      }
    });

    document.getElementById('gallery-submit').addEventListener('click', async () => {
      const file = document.getElementById('gallery-file').files[0];
      const desc = document.getElementById('gallery-desc').value.trim();
      
      if (!file || !desc) {
        alert('íŒŒì¼ê³¼ ì„¤ëª…ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ“·');
        return;
      }

      try {
        setButtonState('gallery-submit', true);
        
        if (!storage || !db) {
          throw new Error('Storage or Database not initialized');
        }
        
        const storageRef = ref(storage, `gallery/${Date.now()}_${file.name}`);
        const snapshot = await uploadBytes(storageRef, file);
        const imageUrl = await getDownloadURL(snapshot.ref);
        
        await addDoc(collection(db, 'gallery'), {
          imageUrl,
          desc,
          createdAt: serverTimestamp()
        });
        
        showSuccess('gallery-success');
        document.getElementById('gallery-file').value = '';
        document.getElementById('gallery-desc').value = '';
        loadGalleryList();
        
      } catch (error) {
        console.error('ê°¤ëŸ¬ë¦¬ ì—…ë¡œë“œ ì˜¤ë¥˜:', error);
        alert('ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      } finally {
        setButtonState('gallery-submit', false);
      }
    });

    document.getElementById('timeline-submit').addEventListener('click', async () => {
      const title = document.getElementById('timeline-title').value.trim();
      const content = document.getElementById('timeline-content').value.trim();
      
      if (!title || !content) {
        alert('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”! â°');
        return;
      }

      try {
        setButtonState('timeline-submit', true);
        
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        await addDoc(collection(db, 'timeline'), {
          title,
          content,
          createdAt: serverTimestamp()
        });
        
        showSuccess('timeline-success');
        document.getElementById('timeline-title').value = '';
        document.getElementById('timeline-content').value = '';
        loadTimelineList();
        
      } catch (error) {
        console.error('íƒ€ì„ë¼ì¸ ë“±ë¡ ì˜¤ë¥˜:', error);
        alert('ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      } finally {
        setButtonState('timeline-submit', false);
      }
    });

    document.getElementById('youtube-submit').addEventListener('click', async () => {
      const url = document.getElementById('youtube-url').value.trim();
      const desc = document.getElementById('youtube-desc').value.trim();
      
      if (!url || !desc) {
        alert('ë§í¬ì™€ ì„¤ëª…ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ“º');
        return;
      }

      try {
        setButtonState('youtube-submit', true);
        
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        await addDoc(collection(db, 'youtube'), {
          videoUrl: url,
          description: desc,
          createdAt: serverTimestamp()
        });
        
        showSuccess('youtube-success');
        document.getElementById('youtube-url').value = '';
        document.getElementById('youtube-desc').value = '';
        loadYoutubeList();
        
      } catch (error) {
        console.error('ìœ íŠœë¸Œ ë“±ë¡ ì˜¤ë¥˜:', error);
        alert('ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      } finally {
        setButtonState('youtube-submit', false);
      }
    });

    document.getElementById('diary-submit').addEventListener('click', async () => {
      const date = document.getElementById('diary-date').value;
      const content = document.getElementById('diary-content').value.trim();
      
      if (!date || !content) {
        alert('ë‚ ì§œì™€ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ“–');
        return;
      }

      try {
        setButtonState('diary-submit', true);
        
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        await addDoc(collection(db, 'diary'), {
          date,
          content,
          createdAt: serverTimestamp()
        });
        
        showSuccess('diary-success');
        document.getElementById('diary-date').value = '';
        document.getElementById('diary-content').value = '';
        loadDiaryList();
        
      } catch (error) {
        console.error('ë‹¤ì´ì–´ë¦¬ ë“±ë¡ ì˜¤ë¥˜:', error);
        alert('ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      } finally {
        setButtonState('diary-submit', false);
      }
    });

    async function loadBlogList() {
      try {
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        const q = query(collection(db, 'blog'), orderBy('createdAt', 'desc'));
        const snapshot = await getDocs(q);
        const listElement = document.getElementById('blog-list');
        
        listElement.innerHTML = '';
        
        if (snapshot.empty) {
          listElement.innerHTML = '<div class="loading-indicator">ë“±ë¡ëœ ë¸”ë¡œê·¸ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
          return;
        }
        
        snapshot.forEach(doc => {
          const data = doc.data();
          const item = document.createElement('div');
          item.className = 'content-item';
          item.innerHTML = `
            <h3>${data.title}</h3>
            <p>${data.content}</p>
            <div class="item-actions">
              <button class="delete-btn" onclick="deleteItem('blog', '${doc.id}')">ì‚­ì œ</button>
            </div>
          `;
          listElement.appendChild(item);
        });
      } catch (error) {
        console.error('ë¸”ë¡œê·¸ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
        document.getElementById('blog-list').innerHTML = '<div class="loading-indicator">ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message + '</div>';
      }
    }

    async function loadGalleryList() {
      try {
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        const q = query(collection(db, 'gallery'), orderBy('createdAt', 'desc'));
        const snapshot = await getDocs(q);
        const listElement = document.getElementById('gallery-list');
        
        listElement.innerHTML = '';
        
        if (snapshot.empty) {
          listElement.innerHTML = '<div class="loading-indicator">ë“±ë¡ëœ ê°¤ëŸ¬ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
          return;
        }
        
        snapshot.forEach(doc => {
          const data = doc.data();
          const item = document.createElement('div');
          item.className = 'content-item';
          item.innerHTML = `
            <img src="${data.imageUrl}" class="gallery-preview" alt="${data.desc}">
            <p>${data.desc}</p>
            <div class="item-actions">
              <button class="delete-btn" onclick="deleteItem('gallery', '${doc.id}')">ì‚­ì œ</button>
            </div>
          `;
          listElement.appendChild(item);
        });
      } catch (error) {
        console.error('ê°¤ëŸ¬ë¦¬ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
        document.getElementById('gallery-list').innerHTML = '<div class="loading-indicator">ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message + '</div>';
      }
    }

    async function loadTimelineList() {
      try {
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        const q = query(collection(db, 'timeline'), orderBy('createdAt', 'desc'));
        const snapshot = await getDocs(q);
        const listElement = document.getElementById('timeline-list');
        
        listElement.innerHTML = '';
        
        if (snapshot.empty) {
          listElement.innerHTML = '<div class="loading-indicator">ë“±ë¡ëœ íƒ€ì„ë¼ì¸ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
          return;
        }
        
        snapshot.forEach(doc => {
          const data = doc.data();
          const item = document.createElement('div');
          item.className = 'content-item';
          item.innerHTML = `
            <h3>${data.title}</h3>
            <p>${data.content}</p>
            <div class="item-actions">
              <button class="delete-btn" onclick="deleteItem('timeline', '${doc.id}')">ì‚­ì œ</button>
            </div>
          `;
          listElement.appendChild(item);
        });
      } catch (error) {
        console.error('íƒ€ì„ë¼ì¸ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
        document.getElementById('timeline-list').innerHTML = '<div class="loading-indicator">ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message + '</div>';
      }
    }

    async function loadYoutubeList() {
      try {
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        const q = query(collection(db, 'youtube'), orderBy('createdAt', 'desc'));
        const snapshot = await getDocs(q);
        const listElement = document.getElementById('youtube-list');
        
        listElement.innerHTML = '';
        
        if (snapshot.empty) {
          listElement.innerHTML = '<div class="loading-indicator">ë“±ë¡ëœ ìœ íŠœë¸Œ ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤.</div>';
          return;
        }
        
        snapshot.forEach(doc => {
          const data = doc.data();
          const item = document.createElement('div');
          item.className = 'content-item';
          item.innerHTML = `
            <h3>ìœ íŠœë¸Œ ì˜ìƒ</h3>
            <p>${data.description}</p>
            <a href="${data.videoUrl}" target="_blank">${data.videoUrl}</a>
            <div class="item-actions">
              <button class="delete-btn" onclick="deleteItem('youtube', '${doc.id}')">ì‚­ì œ</button>
            </div>
          `;
          listElement.appendChild(item);
        });
      } catch (error) {
        console.error('ìœ íŠœë¸Œ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
        document.getElementById('youtube-list').innerHTML = '<div class="loading-indicator">ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message + '</div>';
      }
    }

    async function loadDiaryList() {
      try {
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        const q = query(collection(db, 'diary'), orderBy('date', 'desc'));
        const snapshot = await getDocs(q);
        const listElement = document.getElementById('diary-list');
        
        listElement.innerHTML = '';
        
        if (snapshot.empty) {
          listElement.innerHTML = '<div class="loading-indicator">ë“±ë¡ëœ ë‹¤ì´ì–´ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
          return;
        }
        
        snapshot.forEach(doc => {
          const data = doc.data();
          const item = document.createElement('div');
          item.className = 'content-item';
          item.innerHTML = `
            <h3>${data.date}</h3>
            <p>${data.content}</p>
            <div class="item-actions">
              <button class="delete-btn" onclick="deleteItem('diary', '${doc.id}')">ì‚­ì œ</button>
            </div>
          `;
          listElement.appendChild(item);
        });
      } catch (error) {
        console.error('ë‹¤ì´ì–´ë¦¬ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
        document.getElementById('diary-list').innerHTML = '<div class="loading-indicator">ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message + '</div>';
      }
    }

    async function loadGuestbookList() {
      try {
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        const q = query(collection(db, 'guestbook'), orderBy('createdAt', 'desc'));
        const snapshot = await getDocs(q);
        const listElement = document.getElementById('guestbook-list');
        
        listElement.innerHTML = '';
        
        if (snapshot.empty) {
          listElement.innerHTML = '<div class="loading-indicator">ë“±ë¡ëœ ë°©ëª…ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
          return;
        }
        
        snapshot.forEach(doc => {
          const data = doc.data();
          const item = document.createElement('div');
          item.className = 'content-item';
          item.innerHTML = `
            <h3>${data.name}</h3>
            <p>${data.message}</p>
            <div class="item-actions">
              <button class="delete-btn" onclick="deleteItem('guestbook', '${doc.id}')">ì‚­ì œ</button>
            </div>
          `;
          listElement.appendChild(item);
        });
      } catch (error) {
        console.error('ë°©ëª…ë¡ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
        document.getElementById('guestbook-list').innerHTML = '<div class="loading-indicator">ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message + '</div>';
      }
    }

    window.deleteItem = async function(collectionName, docId) {
      if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
      
      try {
        if (!db) {
          throw new Error('Database not initialized');
        }
        
        await deleteDoc(doc(db, collectionName, docId));
        alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        loadContent(currentTab);
      } catch (error) {
        console.error('ì‚­ì œ ì˜¤ë¥˜:', error);
        alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    };

    function loadContent(tabId) {
      switch(tabId) {
        case 'blog':
          loadBlogList();
          break;
        case 'gallery':
          loadGalleryList();
          break;
        case 'timeline':
          loadTimelineList();
          break;
        case 'youtube':
          loadYoutubeList();
          break;
        case 'diary':
          loadDiaryList();
          break;
        case 'guestbook':
          loadGuestbookList();
          break;
      }
    }

    document.getElementById('diary-date').value = new Date().toISOString().split('T')[0];

    function createAdminParticle() {
      const particles = ['âš™ï¸', 'ğŸ”§', 'ğŸ“Š', 'ğŸ’»', 'ğŸ› ï¸', 'ğŸ“ˆ'];
      const particle = particles[Math.floor(Math.random() * particles.length)];
      
      const element = document.createElement('div');
      element.innerHTML = particle;
      element.style.position = 'fixed';
      element.style.pointerEvents = 'none';
      element.style.fontSize = '16px';
      element.style.zIndex = '999';
      element.style.left = Math.random() * window.innerWidth + 'px';
      element.style.top = '-20px';
      element.style.animation = 'adminParticle 6s ease-out forwards';
      element.style.opacity = '0.7';
      
      const style = document.createElement('style');
      style.textContent = `
        @keyframes adminParticle {
          0% { 
            opacity: 0; 
            transform: translateY(0) rotate(0deg); 
          }
          20% { 
            opacity: 0.7; 
          }
          80% { 
            opacity: 0.7; 
          }
          100% { 
            opacity: 0; 
            transform: translateY(100vh) rotate(360deg); 
          }
        }
      `;
      document.head.appendChild(style);
      
      document.body.appendChild(element);
      
      setTimeout(() => {
        element.remove();
        style.remove();
      }, 6000);
    }

    setInterval(createAdminParticle, 4000);

    setTimeout(() => {
      try {
        loadBlogList();
      } catch (error) {
        console.error('ì´ˆê¸° ë¡œë”© ì‹¤íŒ¨:', error);
      }
    }, 1000);
  </script>
</body>
</html>